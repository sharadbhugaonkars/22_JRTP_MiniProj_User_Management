package com.example.demo.service.impl;


import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.example.demo.entity.Country;
import com.example.demo.entity.State;
import com.example.demo.entity.User;
import com.example.demo.exception.UserEmailNotFoundException;
import com.example.demo.repo.CityRepository;
import com.example.demo.repo.CountryRepository;
import com.example.demo.repo.StateRepository;
import com.example.demo.repo.UserRepository;
import com.example.demo.service.IUserService;

@Service

public class UserServiceImpl implements IUserService{
	
	
	@Autowired
	private UserRepository userRepository;
	
	@Autowired
	private CountryRepository countryRepository;
	
	@Autowired
	private StateRepository stateRepository;
	
	@Autowired
	private CityRepository cityRepository;
	
	
	
	
	@Override
    public String checkEmail(User user) throws UserEmailNotFoundException {
		
		if(userRepository.existsByEmail(user.getEmail()) && userRepository.existsByPassword(user.getPassword())) {
        	
                 return "WelCome To Login Page:";
            
        }else {
        	
         	       return "Invalid Credentials:";
        }
        	
	}
	
	@Override
	public List<Country> getCountrieses(){
		
		List<Country> countries=countryRepository.findAll();
		
		return countries;
	}
	
	@Override
	public List<State> getStateses(Integer countryId){
		
		List<State> states=stateRepository.getStates(countryId);
		
		return states;
	}
	
	@Override
	public List<Map<Integer,String>> getCitieses(Integer stateId){
		
		List<Map<Integer,String>> cities=cityRepository.getCities(stateId);
		
		return cities;
	}
	
	@Override
	public String registerUser(User user) {
		
		userRepository.save(user);
	     return "User Created";
	        }
	}
